hook.Add("AddToolMenuCategories", "AddToolMenuCategories_ObjectCreatorVehicle", function()
    spawnmenu.AddToolCategory("Utilities", "Object Creator Vehicle", "Object Creator Vehicle")
end)

local function ObjectCreatorVehicle_Panel(CPanel)
    CPanel:ClearControls()
    CPanel:AddControl("Header", { Description = "Object Creator Vehicle allows you to generate a code for a vehicle with the props you put. This is used for example to create a flashing light ramp for example"})
    CPanel:AddControl("TextBox", {Label = "Vehicle Name", Command = "obcv_name", MaxLength = "50"})
    CPanel:AddControl("TextBox", {Label = "Vehicle Category", Command = "obcv_category", MaxLength = "50"})
    CPanel:AddControl("TextBox", {Label = "Vehicle Information", Command = "obcv_information", MaxLength = "50"})
    CPanel:AddControl("TextBox", {Label = "Props ID", Command = "obcv_props", MaxLength = "200"})

    CPanel:Help("")
    local vector = vgui.Create("DCollapsibleCategory")
    vector:SetLabel("Vector")
    vector:SetSize(100, 100)
    vector:Dock(TOP)

    CPanel:AddItem(vector)

    local CategoryContentVector = vgui.Create("DPanelList")
    CategoryContentVector:SetAutoSize(true)
    CategoryContentVector:SetDrawBackground(false)
    CategoryContentVector:SetSpacing(1)
    CategoryContentVector:SetPadding(2)
    vector:SetContents(CategoryContentVector)

    // Slider
    local SliderX = vgui.Create("DNumSlider", CPanel)
    SliderX:SetText("X")
    SliderX.Label:SetDark(true)
    SliderX:SetMin(-500)
    SliderX:SetMax(500)
    SliderX:SetDecimals(3)
    SliderX:SetConVar("obcv_x")
    CategoryContentVector:AddItem(SliderX)

    local SliderY = vgui.Create("DNumSlider", CPanel)
    SliderY:SetText("Y")
    SliderY.Label:SetDark(true)
    SliderY:SetMin(-500)
    SliderY:SetMax(500)
    SliderY:SetDecimals(3)
    SliderY:SetConVar("obcv_y")
    CategoryContentVector:AddItem(SliderY)

    local SliderZ = vgui.Create("DNumSlider", CPanel)
    SliderZ:SetText("Z")
    SliderZ.Label:SetDark(true)
    SliderZ:SetMin(-500)
    SliderZ:SetMax(500)
    SliderZ:SetDecimals(3)
    SliderZ:SetConVar("obcv_z")
    CategoryContentVector:AddItem(SliderZ)

    CPanel:Help("")
    local angle = vgui.Create("DCollapsibleCategory")
    angle:SetLabel("Angle")
    angle:SetSize(100, 100)
    angle:Dock(TOP)
    
    CPanel:AddItem(angle)

    local CategoryContentAngle = vgui.Create("DPanelList")
    CategoryContentAngle:SetAutoSize(true)
    CategoryContentAngle:SetDrawBackground(false)
    CategoryContentAngle:SetSpacing(1)
    CategoryContentAngle:SetPadding(2)
    angle:SetContents(CategoryContentAngle)

    // Slider
    local SliderPitch = vgui.Create("DNumSlider", CPanel)
    SliderPitch:SetText("Pitch")
    SliderPitch.Label:SetDark(true)
    SliderPitch:SetMin(-360)
    SliderPitch:SetMax(360)
    SliderPitch:SetDecimals(3)
    SliderPitch:SetConVar("obcv_pitch")
    CategoryContentAngle:AddItem(SliderPitch)

    local SliderYaw = vgui.Create("DNumSlider", CPanel)
    SliderYaw:SetText("Yaw")
    SliderYaw.Label:SetDark(true)
    SliderYaw:SetMin(-360)
    SliderYaw:SetMax(360)
    SliderYaw:SetDecimals(3)
    SliderYaw:SetConVar("obcv_yaw")
    CategoryContentAngle:AddItem(SliderYaw)

    local SliderRoll = vgui.Create("DNumSlider", CPanel)
    SliderRoll:SetText("Roll")
    SliderRoll.Label:SetDark(true)
    SliderRoll:SetMin(-360)
    SliderRoll:SetMax(360)
    SliderRoll:SetDecimals(3)
    SliderRoll:SetConVar("obcv_roll")
    CategoryContentAngle:AddItem(SliderRoll)
    

    CPanel:AddControl("Button", { Text = "Visual", Command = "object_creator_vehicle_visual"})
    CPanel:AddControl("Button", { Text = "Generate code", Command = "object_creator_vehicle_generate_code" })
end

hook.Add("PopulateToolMenu", "PopulateToolMenu_ObjectCreatorVehicle", function()
    spawnmenu.AddToolMenuOption("Utilities", "Object Creator Vehicle", "Object Creator Vehicle", "Object Creator Vehicle", "", "", ObjectCreatorVehicle_Panel)
end)

CreateClientConVar("obcv_name", "", false, false)
CreateClientConVar("obcv_category", "", false, false)
CreateClientConVar("obcv_information", "", false, false)
CreateClientConVar("obcv_props", "", false, false)

CreateClientConVar("obcv_x", 0, false, false)
CreateClientConVar("obcv_y", 0, false, false)
CreateClientConVar("obcv_z", 0, false, false)

CreateClientConVar("obcv_pitch", 0, false, false)
CreateClientConVar("obcv_yaw", 0, false, false)
CreateClientConVar("obcv_roll", 0, false, false)